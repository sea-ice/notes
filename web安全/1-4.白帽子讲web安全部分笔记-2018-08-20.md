认证（Authentication）和授权（Authorization）的区别：
认证是为了认出用户是谁，授权则是为了决定用户能够做什么

## 认证与会话管理

### 密码管理

密码必须以不可逆的加密算法或者单向散列函数算法加密后再存储到数据库中

黑客广泛采用的用于破解MD5加密的密码的方法：彩虹表，它的思路是收集尽可能多的密码明文和明文对应的MD5值，只要能找到相同的MD5值，就可以找到对应的密码明文。

为了避免密码的MD5值泄漏之后，攻击者可以通过彩虹表查找到对应的密码明文，服务器端可以在计算密码的哈希值时加入Salt，然后再对加Salt的结果进行加密，从而大大提升破解的难度。

### Session与认证

由于手机不支持Cookie，因此一些网站会把SessionID作为URL的GET参数进行传递来管理会话。但是这种方法的安全性很难经受考验。这是因为SessionID可能会因为攻击者在当前页面构造请求通过Referrer header而遭到泄漏。

Session Fixation攻击：用户在登录前后如果SessionID没有发生变化，则会存在Session Fixation攻击隐患。具体攻击过程是攻击者先获取一个未经认证的SessionID，然后再将这个SessionID交给用户A去认证，A完成认证之后，服务器并未更新此SessionID的值，则攻击者可以凭借此SessionID直接使用用户A的账户。对于SessionID存储在Cookie中很难完成Session Fixation攻击，而如果服务端把SessionID放到URL中，攻击者只需要诱导用户点击包含未认证SessionID的URL，然后让用户完成登录即可构成攻击。

解决Session Fixation攻击隐患的办法就是在用户登录完成后重写SessionID。

JavaScript脚本如果具有对Cookie的读写权限，则Cookie的过期时间则完全受客户端脚本控制。

## 授权

授权也叫访问控制，判断用户是否具有对某个资源的访问权限。OAuth协议是一个在不需要用户提供第三方服务用户名和密码的情况下，授权网站使用该第三方服务某些资源的安全协议。

## DDOS攻击

DDOS攻击分为网络层DDOS和应用层DDOS。

网络层DDOS最典型的就是SYN Flood。SYN Flood利用的是TCP协议自身的缺陷，在攻击时会先伪造大量的源IP地址，分别向服务器发起大量的SYN包，此时服务端会返回SYN/ACK包，因为源IP地址是伪造的，所以在这之后客户端并不会向服务端应答。服务端在没收到应答时会重试并等待一个SYN Time（一般为30秒到2分钟），如果超时则丢弃这个连接。正是这些海量、迟迟得不到应答的请求耗尽了服务端的资源，造成正常请求无法得到响应，服务端“拒绝服务”。

应对SYN Flood的措施：可以统计每个IP地址的请求频率，当某个IP地址请求频率超出限制，则认为受到攻击，然后对该IP之后的所有请求都进行丢弃。

应用层DDOS案例：

- CC（Challenge Collapasar）攻击
  - 背景：Collapasar是中国安全公司--绿盟推出的反DDOS设备，能够有效清洗SYN Flood等有害流量
  - CC攻击则是从应用层发起的，原理是对消耗资源较大的应用页面不断发起正常请求，以达到消耗服务端资源的目的
- 在入侵了一个流量很大的网站之后，通过篡改页面（比如在网站上插入iframe，指向目标网站），将巨大的用户流量分流到目标网站，从而达到攻击目标网站的目的
- 耗尽web Server连接数的攻击
  - Slowloris攻击，原理是以极低的速度发送HTTP请求，缓慢发送任意构造的Header，达到将连接保持的目的。正常情况下Headers是以两个CLRF结束的，攻击者可以持续发送Header，只要不以两个CLRF结尾，服务器就不认为当前请求的Headers部分已经结束。通过这种方式最终将服务器的连接数占满，达到“拒绝服务”的目的。
  - HTTP POST DOS。原理和Slowloris攻击类似，区别在于发送HTTP POST包时指定了一个很大的Content-Length值，然后以很低的速率发包。

应对应用层DDOS的手段：

- 使用memcache，将使用频率较高的数据放到memcache中，从而减少对数据库的查询。可以应对大量的读操作，但是对于写操作，最终仍然会操作数据库。
- 使用验证码，防止资源的滥用。
- 其他人机识别的方法，可以让客户端解析一段JavaScript，并要求给出正确的运行结果，以此区分是脚本还是浏览器发起的请求。

