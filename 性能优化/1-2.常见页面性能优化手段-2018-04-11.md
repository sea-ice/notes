## 用户体验

### 页面加载速度

**资源放到多个域名下实现并行下载**，多用于PC端。这种优化手段也称为域名发散或者域名分片，主要是利用了浏览器在加载页面资源时能够同时跟多个不同域名建立连接并下载资源的特性。

**使用尽可能少的域名来提供对资源的访问**，多用于移动端。这种优化手段也称为域名收敛，和上面PC端的情况正好相反。主要是考虑到移动端易处于弱网络环境下，如果域名较多，移动端解析域名就需要耗费更多的时间，不利于提升页面的载入速度。而域名收敛能够有效地减少不必要的DNS请求。

**页面引入CSS文件尽可能提前，JS文件则尽量放到页面底部**，这是因为CSS文件的加载速度会影响到页面的渲染（注意不会影响页面的解析），即会影响render tree的构建，所以CSS文件的位置要尽量靠前。而执行JavaScript脚本会阻塞页面的解析，为了尽可能快地呈现页面的主体结构，应该把脚本文件放到页面的底部。


## 浏览器兼容性

为了浏览器的兼容性，我们常常需要在页面中引入一些 polyfill。单纯把一些 polyfill 脚本直接引入到页面中是不可行的，因为并不是所有的用户都需要 polyfill，使用较新版本浏览器的用户就不需要多余的 polyfill。也就是说应该使用**动态的 polyfill 服务**，实现这一点也很方便，直接在页面中引入以下脚本即可：https://cdn.polyfill.io/v2/polyfill.js。它的原理是根据请求的UA请求头来判断用户使用的浏览器版本，从而判断出该版本浏览器需要哪些 polyfill。