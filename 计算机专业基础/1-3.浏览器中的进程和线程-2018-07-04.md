## 浏览器中的进程

浏览器是多进程的，其中主要的进程有：

1. Browser进程：浏览器的主进程，只有一个，其作用如下：

（1）、负责浏览器界面的显示，与用户进行交互（如点击前进、后退等）
（2）、负责各个页面的管理，创建和销毁其他进程
（3）、将Renderer进程返回的内存中的Bitmap绘制到页面上
（4）、网络资源的管理、下载等

2. Renderer进程：也叫浏览器渲染进程，可以有多个，默认情况一个标签页对应一个Renderer进程。内部有多个线程。Renderer进程的作用如下：

（1）、解析DOM，构建Render树
（2）、执行页面上的JavaScript脚本
（3）、事件处理
...

3. GPU 进程：最多一个，用于3D渲染

## Renderer进程中的线程

Renderer进程作为负责解析和渲染页面上资源的角色，与前端联系最为紧密。接下来重点介绍Renderer进程中存在的多个线程：

1. GUI 渲染线程：负责解析和渲染页面，具体来说，就是解析HTML、CSS，构建对应的DOM树并生成render tree、布局计算、绘制等
2. JS引擎线程：主要功能就是用于执行JavaScript代码；
GUI 渲染线程和JS引擎是互斥的。
3. 事件触发线程：用于监听事件并且在事件触发时将事件处理函数添加到JS引擎线程的执行队列
4. 定时触发器线程：计时并在计时完毕时将对应的回调函数添加到JS引擎线程的执行队列
5. 异步http请求线程：负责异步的http请求，当检测到XMLHttpRequest对象状态变更时会将对应的回调函数放入到JS引擎线程的执行队列

## web worker

针对JS是单线程，在应对CPU密集型任务时有些吃力，HTML5中引入了web worker，通过将繁重的计算任务交给由浏览器创建的新的worker线程，避免JS引擎线程执行代码时间过长导致页面阻塞。

在创建新的worker线程时，JS引擎向浏览器申请开一个子线程，该worker线程访问范围有限，不能操作DOM；JS引擎线程与worker线程间通过HTML5 PostMessage API进行通信。