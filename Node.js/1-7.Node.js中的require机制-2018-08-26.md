### Node.js模块循环引用的问题

代码示例：

```javascript
// a.js
exports.loaded = false

console.log('before require b in a')
const b = require('./b')
console.log('before require b in a')

module.exports = {
  loaded: true,
  bWasLoaded: b.loaded
}

// b.js
exports.loaded = false
console.log('before require a in b')
const a = require('./a') // a 已经加载过了，故不会继续执行a模块中require('./b')后面的代码，所以执行这一行之后会直接执行当前文件的下一行
console.log('after require a in b')

module.exports = {
  loaded: true,
  aWasLoaded: a.loaded
}

// index.js
const a = require('./a')
const b = require('./b')

console.log(a)
console.log(b)
```

运行index.js文件之后，打印出来的结果如下：

```javascript
// before require b in a
// before require a in b
// after require a in b
// before require b in a
// { loaded: true, bWasLoaded: true }
// { loaded: true, aWasLoaded: false }
```