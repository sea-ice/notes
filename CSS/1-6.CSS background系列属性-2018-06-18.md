### 引言

> CSS3 中新增了一些与元素背景有关的`background-*`属性，包括`background-origin`、`background-clip`、`background-size`属性。作为在 CSS 中最经常使用的属性之一，它的重要性自然也就不言而喻了。下面让我们通过一个实例来感受一下这个强大的`background-*`属性家族。

### 从一个实例讲起

首先这个实例是想通过 CSS3 实现文字流光渐变效果，代码张贴如下：

```css
<p>CSS3字体流光渐变效果</p>
<style type="text/css">
p {
    background-image: -webkit-linear-gradient(left, blue, red 25%, blue 50%, red 75%, blue 100%);
    -webkit-background-clip: text;
    color: transparent;
    background-size: 200% 100%;
    animation: streamer 5s infinite linear;
    -webkit-animation: streamer 5s infinite linear;
}
@keyframes streamer {
    0% { background-position: 0 0; }
    100% { background-position: -100% 0; }
}
</style>
```

代码看起来也不难理解，但这其中却是将 CSS3 的一些新特性展现得淋漓尽致，比如 CSS3 中新增的`background-*`一系列属性以及`animation`属性。另外，还用到了 `webkit` 的一个私有属性：`-webkit-background-clip`。所以想通过这个实例进而引出本文的重点——`background`属性及其子属性。

### background属性及其子属性

#### background属性

一看名字就知道，`background`属性是用来设置元素的背景的。`background` 可以同时用来设置一个或多个属性:`background-color`, `background-image`, `background-position`, `background-repeat`, `background-size`, `background-attachment`。`background`属性及其子属性可以应用在所有元素上，包括`::first-letter`和`::first-line`伪元素上。此外，此属性不能被子元素继承。

#### background-attachment属性

`background-attachment`属性用来指定背景在视口中是否固定还是随着元素内容滚动而滚动。默认值是`scroll`。可选的值有：
- `fixed`：相对视口固定。
- `local`：相对于元素中的内容固定，如果元素本身出现滚动条，会随着元素内容的滚动而滚动； 并且背景的绘制区域和定位区域是相对于可滚动的区域而不是包含他们的边框。
- `scroll`：**相对于元素本身固定，不随着元素内容的滚动而滚动**。这个属性值名称本身也带有一定的迷惑性，取名为`scroll`为什么就不随元素内容滚动而滚动，表示不解。。

如果出现需要定义多个背景时，对于每个背景应用的`background-\*`属性值可以同时定义在一个`background-\*`属性上并用逗号隔开。

#### background-clip属性

`background-clip`属性用于裁剪背景图。默认值为`border-box`，即裁剪出`border` + `padding` + `content`区域的背景（如果设置了`border`边框的颜色，会覆盖边框区域的背景；如果要看到边框区域的背景，需要为边框设置`border-color: transparent; border-width: 10px;` **border-style: solid**）。
其他可选的值有：
- `padding-box`：裁剪出`padding` + `content`区域的背景。
- `content-box`：裁剪出内容区域的背景。

`webkit`内核的浏览器还定义了`-webkit-background-clip`私有属性，除了上面的值之外，还可以设置的值有`text`（用来只显示文字背景，文字镂空的地方不显示背景，在实现上面实例时发挥着很重要的作用）。

#### background-color属性

`background-color`：设置背景色。可以设置为十六进制颜色值或者关键字`"transparent"`，还可以是一些颜色函数如`rgb`、`hsla`等。

#### background-image属性

`background-image`：设置背景图片。可以同时为元素指定一个或多个背景图片，**先指定的图片会覆盖之后指定的图片**。背景图片在z轴方向上会位于边框之下，背景色之上。指定的值可以是`url(...)`函数，也可以是渐变函数`linear-gradient(...)`、`radial-gradient(...)`等。

可以同时设置`background-color`和`background-image`。

#### background-origin属性

`background-origin`属性规定了指定背景图片的原点位置。当定义了此属性，然后又定义了`background`属性时，如果`background`属性没有设置此属性，则此属性将取默认值。注意：**当使用 `background-attachment` 为`fixed`时，该属性将被忽略不起作用**。可选的值有：
- `border-box`：给定图片的原点位置位于边框外沿左上角；
- `padding-box`：默认值，给定图片的原点位置位于`padding`外沿左上角；
- `content-box`：给定图片的原点位置位于`content`区域外沿左上角；

默认情况下元素通过`background`属性设置的背景图片会遮盖元素`padding`的所在区域（原因就是因为默认情况下`background-origin`属性值为`padding-box`）。

和`background-clip`属性不同的是，`background-origin`属性指定的是背景图片左上角（原点）的显示位置（从边框区域的左上角开始、或者从`padding`区域左上角开始还是从`content`区域左上角开始），而`background-clip`属性则是在`background-origin`属性确定背景图片的显示位置之后进行裁剪。

#### background-position属性

`background-position`属性指定背景图片的偏移位置，这个偏移位置是相对由`background-origin`属性值确定的背景原点位置而言的。当定义了此属性，然后又定义了`background`属性时，如果`background`属性没有设置此属性，则此属性将取默认值。默认值为`0% 0%`。属性值的格式：`<length>( <length>)` \| `<percentage>( <percentage>)` 或者长度值和百分比值混合使用。

属性值为长度值：如果是水平方向上的正值，则表示将背景图片向右平移指定的距离，反之则反方向进行平移。如果是竖直方向上的正值，则表示将背景图片向下平移指定的距离，反之则反方向进行平移。

属性值为百分比：如果两个值都是百分比值，则表示背景图片本身（`x%`, `y%`）的那个点与元素内容区域的（`x%`, `y%`）的那个点重合，例如设置为`100% 100%`则表示图片右下角与元素内容区域外沿右下角重合。也可以设置为负值。

属性值为关键词：关键词 `left` 和 `right` 只能被指定水平方向的位置（第一个值），而 `top` 和 `bottom` 只能被指定指定为垂直方向的值（第二个值）。具体它们还可以搭配构成以下这些值：
- `top left` 或 `left top`：等价于`'0% 0%'`；
- `top`, `top center` 或 `center top`：等价于`'50% 0%'`；
- `right top` 或 `top right`：等价于`'100% 0%'`；
- `left`, `left center` 或 `center left`：等价于`'0% 50%'`；
- `center` 或 `center center`：等价于`'50% 50%'`；
- `right`, `right center` 或 `center right`：等价于`'100% 50%'`；
- `bottom left` 或 `left bottom`：等价于`'0% 100%'`；
- `bottom`, `bottom center` 或 `center bottom`：等价于`'50% 100%'`；
- `bottom right` 或 `right bottom`：等价于`'100% 100%'`；

如果只有一个值被指定，则这个值就会默认设置背景图片位置中的水平方向，与此同时垂直方向的默认值被设置成`50%`。

#### background-repeat属性

`background-repeat` 属性指定背景图片是否以平铺效果重复出现，以及重复的方式。可取的值有：

- `repeat-x`：只在水平方向上平铺。
- `repeat-y`：只在竖直方向上平铺。
- `repeat`：默认值；在水平和竖直方向都进行平铺。
- `space`： 图像会尽可能得重复, 但是不会裁剪。第一个和最后一个图像会被固定在元素的相应的边上，同时空白会均匀地分布在图像之间。`background-position`属性会被忽视，除非只有一个图像能被无裁剪地显示。只在一种情况下裁剪会发生，那就是图像太大了以至于没有足够的空间来完整显示一个图像。
- `round`：随着允许的空间在尺寸上的增长，被重复的图像将会伸展（没有空隙），直到有足够的空间来添加一个图像。当下一个图像被添加后, 所有的当前的图像会被压缩来腾出空间。
- `no-repeat`：在水平和竖直方向上不进行平铺。

#### background-size属性

`background-size` 设置背景图片大小。当定义了此属性，然后又定义了`background`属性时，如果`background`属性没有设置此属性，则此属性将取默认值。可以设置一个值或两个值。如果是一个值，则表示设置背景的宽度，背景高度将设置为`auto`；如果设置两个值，则分别对应背景的宽度和高度。

当属性值为百分比值时：相对由`background-origin`属性确定的背景区大小进行计算。默认情况下，背景区为盒模型的内容与`padding`的合并区域。
当属性值为`auto`时，则以背景图片的宽高比例缩放图片。
当属性值为`cover`时，则缩放背景图片以完全覆盖背景区，可能背景图片部分看不见。
当属性值为`contain`时，则缩放背景图片以完全装入背景区，背景区可能会有部分空白。